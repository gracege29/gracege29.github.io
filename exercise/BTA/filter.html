<!DOCTYPE html>
<html>
    
    <head>
        <!-- Google Tag Manager -->
        <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
        'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
        })(window,document,'script','dataLayer','GTM-W8JQKXC');</script>
        <!-- End Google Tag Manager -->
        <!-- Global site tag (gtag.js) - Google Analytics -->
        <script async src="https://www.googletagmanager.com/gtag/js?id=UA-151434935-2"></script>
        <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'UA-151434935-2');
        </script>
        <!-- Global site tag (gtag.js) - Google Analytics -->
        <script async src="https://www.googletagmanager.com/gtag/js?id=UA-151434935-2"></script>
        <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'UA-151434935-2', { 'optimize_id': 'GTM-WXCJSHG'});
        </script>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
        <script type="text/javascript" src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
        <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"
        rel="stylesheet" type="text/css">
        <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/d3/3.4.11/d3.js"></script>
        <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/c3/0.1.29/c3.js"></script>
        <link href="c3-0.7.10/c3.css" rel="stylesheet">
        <script src="c3-0.7.10/docs/js/d3-5.8.2.min.js" charset="utf-8"></script>
        <script src="c3-0.7.10/c3.min.js"></script>
        <link rel="stylesheet" href="https://cdn.datatables.net/1.10.19/css/jquery.dataTables.min.css">
        <script type="text/javascript" language="javascript" src="https://cdn.datatables.net/1.10.19/js/dataTables.bootstrap.min.js"></script>
        <script type="text/javascript" src="https://cdn.datatables.net/1.10.19/js/jquery.dataTables.min.js"></script>
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.3.4/leaflet.css">
        <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.3.4/leaflet.js"></script>
        <script src="https://api.tiles.mapbox.com/mapbox.js/plugins/leaflet-markercluster/v0.4.0/leaflet.markercluster.js"></script>
        <link rel="stylesheet" href="theme.css">
        <link rel="stylesheet" href="style.css">
        <script src="searchcolumn.js"></script>
        <link href="https://fonts.googleapis.com/css?family=Noto+Serif+SC:300&display=swap" rel="stylesheet">
        <style>
            body {
              font-family: 'Noto Serif SC', serif;
            }
        </style>
        <link rel="icon" type="image/x-icon" href="icons/logo.png">
        <title>Bubble Tea Addict吃茶去</title>
    </head>
    
    <body>
    <!-- Google Tag Manager (noscript) -->
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-W8JQKXC"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager (noscript) -->
        <div class="navbar navbar-default navbar-inverse navbar-static-top" id="nav">
            <div class="container">
                <div class="navbar-header">
                    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar-ex-collapse">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                    <a class="navbar-brand" href="#" style="padding:10px;">
                        <img src="icons/logo1.png" type="img-responsive" style="width: 84px; height: 28px;vertical-align: middle;">
                    </a>
                </div>
                <div class="collapse navbar-collapse" id="navbar-ex-collapse">
                    <ul class="nav navbar-nav navbar-right">
                        <li class="active">
                            <a href="#classification">筛选器</a>
                        </li>
                        <li>
                            <a href="#shops">附近店铺</a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
        <div class="section" id="classification">
            <div class="container">
                <h4>奶茶筛选器</h4>
                <p>筛选器将每一杯奶茶的店铺、茶类型、茶底（茶叶）、配料等分别列出，建议先在底部筛选条选择想喝的茶类型，如奶盖茶、芝士茶等，再筛选店铺。点单前记得查看配料噢，避免“踩雷”你不喜欢的配料~</p>
                <div class="table-responsive">
                    <table id="data-table" width="100%" class="table table-bordered">
                        <thead>
                            <tr>
                                <th>名称</th>
                                <th>店铺</th>
                                <th>类型</th>
                                <th>茶底</th>
                                <th>配料</th>
                                <th>店家描述</th>
                            </tr>
                        </thead>
                        <tfoot>
                            <tr>
                                <th>名称</th>
                                <th>店铺</th>
                                <th>类型</th>
                                <th>茶底</th>
                                <th>配料</th>
                                <th>店家描述</th>
                            </tr>
                        </tfoot>
                    </table>
                </div>
            </div>
            <div class="section" style="padding-bottom: 0px">
                <div class="container">
                    <div class="row" style="padding-left: 10px" id="shops">
                        <div class="col-md-12" style="padding: 0px">
                            <h4>附近店铺</h4>
                            <p>目前仅收录中国香港及深圳部分店铺信息，敬请谅解！</p>
                        </div>
                         <!--分类标记店铺地点-->
                    <form>
                        <select id="filter" class="form-control" onchange="place_marker()">
                              <option value="" selected disabled>请选择店铺</option>
                              <option value="0">一点点</option>
                              <option value="1">鹿角巷</option>
                              <option value="2">CoCo都可</option>
                              <option value="3">厝内小眷村</option>
                              <option value="4">KOI</option>
                              <option value="5">一芳台湾水果茶</option>
                              <option value="6">老虎堂</option>
                              <option value="7">喜茶</option>
                          </select>
                    </form>  
                    <div id="map" style="width:600px; height:400px"></div>
                    <button type="button" class="btn btn-warning" onclick="clear_markers();">清除标记</button><br>
                    <!--这里开始是地图-->
                    <script>
                        var map = L.map('map').setView([22.301886, 114.174053], 10);
                        mapLink = 
                            '<a href="http://openstreetmap.org">OpenStreetMap</a>';
                        L.tileLayer(
                            'http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                            attribution: 'Map data &copy; ' + mapLink,
                            maxZoom: 18,
                            }).addTo(map);
                    
                        layerGroup = L.layerGroup().addTo(map);

                        var items0 = [];
                        var airtable_yidiandian = "https://api.airtable.com/v0/app5Kj0IbtN5wYWCQ/yidiandian?api_key=keyVPDmCemvZStnmu";
                        var data0 = [];
                        $.getJSON(airtable_yidiandian, function(result) {
                            $.each(result.records, function(key,value) {
                                items0 = {};
                                    items0["name"] = value.fields.Name;
                                    items0["address"] = value.fields.address;
                                    items0["langitude"] = value.fields.langitude;
                                    items0["longitude"] = value.fields.longitude;
                                    items0["shop"] = value.fields.shop;
                                    items0["image"] = value.fields.imagelink;
                                    data0.push(items0);
                                    console.log(items0);
                                }); // end .each 一点点
                        }); // end getJSON

                        var items1 = [];
                        var airtable_lujiao = "https://api.airtable.com/v0/app5Kj0IbtN5wYWCQ/lujiao?api_key=keyVPDmCemvZStnmu";
                        var data1 = [];
                        $.getJSON(airtable_lujiao, function(result) {
                            $.each(result.records, function(key,value) {
                                items1 = {};
                                    items1["name"] = value.fields.Name;
                                    items1["address"] = value.fields.address;
                                    items1["langitude"] = value.fields.langitude;
                                    items1["longitude"] = value.fields.longitude;
                                    items1["shop"] = value.fields.shop;
                                    items1["image"] = value.fields.imagelink;
                                    data1.push(items1);
                                    console.log(items1);
                                }); // end .each 鹿角巷
                        }); // end getJSON

                        var items2 = [];
                        var airtable_coco = "https://api.airtable.com/v0/app5Kj0IbtN5wYWCQ/coco?api_key=keyVPDmCemvZStnmu";
                        var data2 = [];
                        $.getJSON(airtable_coco, function(result) {
                            $.each(result.records, function(key,value) {
                                items2 = {};
                                    items2["name"] = value.fields.Name;
                                    items2["address"] = value.fields.address;
                                    items2["langitude"] = value.fields.langitude;
                                    items2["longitude"] = value.fields.longitude;
                                    items2["shop"] = value.fields.shop;
                                    items2["image"] = value.fields.imagelink;
                                    data2.push(items2);
                                    console.log(items2);
                                }); // end .each coco
                        }); // end getJSON

                        var items3 = [];
                        var airtable_cuonei = "https://api.airtable.com/v0/app5Kj0IbtN5wYWCQ/cuonei?api_key=keyVPDmCemvZStnmu";
                        var data3 = [];
                        $.getJSON(airtable_cuonei, function(result) {
                            $.each(result.records, function(key,value) {
                                items3 = {};
                                    items3["name"] = value.fields.Name;
                                    items3["address"] = value.fields.address;
                                    items3["langitude"] = value.fields.langitude;
                                    items3["longitude"] = value.fields.longitude;
                                    items3["shop"] = value.fields.shop;
                                    items3["image"] = value.fields.imagelink;
                                    data3.push(items3);
                                    console.log(items3);
                                }); // end .each 厝内
                        }); // end getJSON

                        var items4 = [];
                        var airtable_koi = "https://api.airtable.com/v0/app5Kj0IbtN5wYWCQ/koi?api_key=keyVPDmCemvZStnmu";
                        var data4 = [];
                        $.getJSON(airtable_koi, function(result) {
                            $.each(result.records, function(key,value) {
                                items4 = {};
                                    items4["name"] = value.fields.Name;
                                    items4["address"] = value.fields.address;
                                    items4["langitude"] = value.fields.langitude;
                                    items4["longitude"] = value.fields.longitude;
                                    items4["shop"] = value.fields.shop;
                                    items4["image"] = value.fields.imagelink;
                                    data4.push(items4);
                                    console.log(items4);
                                }); // end .each koi
                        }); // end getJSON

                        var items5 = [];
                        var airtable_yifang = "https://api.airtable.com/v0/app5Kj0IbtN5wYWCQ/yifang?api_key=keyVPDmCemvZStnmu";
                        var data5 = [];
                        $.getJSON(airtable_yifang, function(result) {
                            $.each(result.records, function(key,value) {
                                items5 = {};
                                    items5["name"] = value.fields.Name;
                                    items5["address"] = value.fields.address;
                                    items5["langitude"] = value.fields.langitude;
                                    items5["longitude"] = value.fields.longitude;
                                    items5["shop"] = value.fields.shop;
                                    items5["image"] = value.fields.imagelink;
                                    data5.push(items5);
                                    console.log(items5);
                                }); // end .each一芳
                        }); // end getJSON

                        var items6 = [];
                        var airtable_laohu = "https://api.airtable.com/v0/app5Kj0IbtN5wYWCQ/laohu?api_key=keyVPDmCemvZStnmu";
                        var data6 = [];
                        $.getJSON(airtable_laohu, function(result) {
                            $.each(result.records, function(key,value) {
                                items6 = {};
                                    items6["name"] = value.fields.Name;
                                    items6["address"] = value.fields.address;
                                    items6["langitude"] = value.fields.langitude;
                                    items6["longitude"] = value.fields.longitude;
                                    items6["shop"] = value.fields.shop;
                                    items6["image"] = value.fields.imagelink;
                                    data6.push(items6);
                                    console.log(items6);
                                }); // end .each老虎堂
                        }); // end getJSON

                        var items7 = [];
                        var airtable_xicha = "https://api.airtable.com/v0/app5Kj0IbtN5wYWCQ/xicha?api_key=keyVPDmCemvZStnmu";
                        var data7 = [];
                        $.getJSON(airtable_xicha, function(result) {
                            $.each(result.records, function(key,value) {
                                items7 = {};
                                    items7["name"] = value.fields.Name;
                                    items7["address"] = value.fields.address;
                                    items7["langitude"] = value.fields.langitude;
                                    items7["longitude"] = value.fields.longitude;
                                    items7["shop"] = value.fields.shop;
                                    items7["image"] = value.fields.imagelink;
                                    data7.push(items7);
                                    console.log(items7);
                                }); // end .each喜茶
                        }); // end getJSON

                    var naicha = document.getElementById("filter");
                    function place_marker(){
                        if (naicha.value == "0"){
                        for (var i in data0) {
                            var latlng = L.latLng({ lat: data0[i].langitude, lng: data0[i].longitude });
                            L.marker( latlng )
                                .bindPopup('<img src="' + data0[i].image+'" width = "80px"><br>'+data0[i].name + '<br>'+data0[i].shop +'<br>'+data0[i].address)
                                .addTo(layerGroup);}
                        ;}else if (naicha.value == "1"){
                            for (var i in data1) {
                            var latlng = L.latLng({ lat: data1[i].langitude, lng: data1[i].longitude });
                            L.marker( latlng )
                                .bindPopup('<img src="' + data1[i].image+'" width = "80px"><br>'+data1[i].name + '<br>'+data1[i].shop +'<br>'+data1[i].address)
                                .addTo(layerGroup);}
                        ;}else if (naicha.value == "2"){
                            for (var i in data2) {
                            var latlng = L.latLng({ lat: data2[i].langitude, lng: data2[i].longitude });
                            L.marker( latlng )
                                .bindPopup('<img src="' + data2[i].image+'" width = "80px"><br>'+data2[i].name + '<br>'+data2[i].shop +'<br>'+data2[i].address)
                                .addTo(layerGroup);}
                        ;}else if (naicha.value == "3"){
                            for (var i in data3) {
                            var latlng = L.latLng({ lat: data3[i].langitude, lng: data3[i].longitude });
                            L.marker( latlng )
                                .bindPopup('<img src="' + data3[i].image+'" width = "80px"><br>'+data3[i].name + '<br>'+data3[i].shop +'<br>'+data3[i].address)
                                .addTo(layerGroup);}
                        ;}else if (naicha.value == "4"){
                            for (var i in data4) {
                            var latlng = L.latLng({ lat: data4[i].langitude, lng: data4[i].longitude });
                            L.marker( latlng )
                                .bindPopup('<img src="' + data4[i].image+'" width = "80px"><br>'+data4[i].name + '<br>'+data4[i].shop +'<br>'+data4[i].address)
                                .addTo(layerGroup);}
                        ;}else if (naicha.value == "5"){
                            for (var i in data5) {
                            var latlng = L.latLng({ lat: data5[i].langitude, lng: data5[i].longitude });
                            L.marker( latlng )
                                .bindPopup('<img src="' + data5[i].image+'" width = "80px"><br>'+data5[i].name + '<br>'+data5[i].shop +'<br>'+data5[i].address)
                                .addTo(layerGroup);}
                        ;}else if (naicha.value == "6"){
                            for (var i in data6) {
                            var latlng = L.latLng({ lat: data6[i].langitude, lng: data6[i].longitude });
                            L.marker( latlng )
                                .bindPopup('<img src="' + data6[i].image+'" width = "80px"><br>'+data6[i].name + '<br>'+data6[i].shop +'<br>'+data6[i].address)
                                .addTo(layerGroup);}
                        ;}else{
                            for (var i in data7) {
                            var latlng = L.latLng({ lat: data7[i].langitude, lng: data7[i].longitude });
                            L.marker( latlng )
                                .bindPopup('<img src="' + data7[i].image+'" width = "80px"><br>'+data7[i].name + '<br>'+data7[i].shop +'<br>'+data7[i].address)
                                .addTo(layerGroup);}
                        ;}
                    ;}//7家店铺坐标

                    function clear_markers () {
                        layerGroup.clearLayers();
                    }//清除坐标
                    </script>
            </div>
           </div>
        </div>
            <div class="section">
                <div class="container" id="footer" style="background-color:#FAF8F0">
                    <div class="row">
                        <div class="col-xs-3">
                            <a  href="home.html"><img src="icons/home.png" width="40" height="40" id="home">
                            <p style="font-size: 15px">首页</p></a>
                        </div>
                        <div class="col-xs-3">
                            <a  href="filter.html"><img src="icons/filter1.png" width="40" height="40" id="filter">
                            <p style="font-size: 15px">筛选</p></a>
                        </div>
                        <div class="col-xs-3">
                            <a  href="find.html"><img src="icons/find.png" width="40" height="40" id="find">
                            <p style="font-size: 15px">发现</p></a>
                        </div>
                        <div class="col-xs-3">
                            <a  href="me.html"><img src="icons/me.png" width="40" height="40" id="me">
                            <p style="font-size: 15px">我</p></a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </body>

</html>